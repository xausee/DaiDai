{{set . "title" .article.Title}}
{{template "header.html" .}}
{{template "navigate_bar.html" .}}

<div class="container">  
  <div class="row">
    <div class="col-xs-1"></div> 
    <div class="col-xs-10">      
      <pre class="text-center">
        <div class="text-center">{{.article.Title}}</div>
        <div class="text-center">{{.article.AuthorNickName}}</div>  	
        <div class="text-left">{{.article.Content}}</div> 
        <div class="text-right">{{.article.CreateTime}} </div>       
      </pre>        
    </div>      
  </div>
  <div class="row">  
    <div class="col-xs-1"></div>
    {{if eq .nickName "水蓝色"}}
      {{if .isRecommonded}}
      <div class="col-xs-9 text-right">
        <a href="{{url "RecommondArticle.DeleteRecommond" .article.AuthorNickName .article.Title .article.Id}}">取消推荐</a>
      </div>
      {{else}}
      <div class="col-xs-9 text-right">
        <a href="{{url "RecommondArticle.Recommond" .article.AuthorNickName .article.Title .article.Id}}">推荐</a>
      </div>
      {{end}} 
    {{else}}
      <div class="col-xs-9 text-right"></div>
    {{end}}

    {{if .isInArticleCollection}}  
    <div class="col-xs-1 text-right">      
      <a href="{{url "User.DeleteFromArticleCollection" .article.AuthorNickName .article.Title .article.Id}}">取消收藏</a>
    </div>
    {{else}}      
    <div class="col-xs-1 text-right">
      <a href="{{url "User.AddToArticleCollection" .article.AuthorNickName .article.Title .article.Id}}">收藏</a>
    </div>  
    {{end}}         
  </div>
  <div class="row">
    <div class="col-xs-1"></div>
    <div class="col-xs-10">      
      <div class="panel panel-success">
        <div class="text-success">
          <well>
            <span class="glyphicon glyphicon-comment text-warning"></span> 评论 [{{.commentCount}}]
            <div class="aligncenter" style="width:auto;height:0;border-top:1px dotted #468847;font-size:0;"></div>
          </well>          
        </div>
        {{range .article.Comments}}         
        <div class="row">               
          <div class="col-xs-0"></div>
          <div class="col-xs-3">
            <div class="text-left text-success">
              <a href="{{url "User.Index" .Author.NickName}}">{{.Author.NickName}}</a>：
            </div> 
          </div>    
          <div class="col-xs-9">
            <div class="text-right text-success">{{.Time}} 发表</div>
          </div> 
        </div>           
        <div class="row">
          <div class="col-xs-1"></div>
          <div class="col-xs-11">
            <div class="text-left">{{nl2br .Content}}</div>
          </div>
          </br>  
        </div>  
        <div class="row">
          <div class="col-xs-1"></div>
          <div class="col-xs-11">
            <div class="aligncenter" style="width:auto;height:0;border-top:1px dotted #468847;font-size:0;"></div>
          </div> 
        </div>
        {{end}} 

        <div class="row">    
          <div class="col-xs-0"></div> 
          <div class="col-xs-12">            
            <form role="form" action="{{url "User.PostArticleComment"}}" method="POST"> 
              {{$authorNickName := .article.AuthorNickName}}
              {{with $field := field "authorNickName" .}} 
              <textarea class="form-control" id="{{$field.Id}}" name="{{$field.Name}}" value="{{$field.Flash}}" 
        rows="1" style="visibility:hidden; display:none;">{{$authorNickName}}</textarea> 
              {{end}} 

              {{$articleid := .article.Id}}
              {{with $field := field "articleid" .}} 
              <textarea class="form-control" id="{{$field.Id}}" name="{{$field.Name}}" value="{{$field.Flash}}" rows="1" style="visibility:hidden; display:none;">{{$articleid}}</textarea> 
              {{end}}  

              {{with $field := field "comment.Content" .}} 
              <div class="input-group {{$field.ErrorClass}}">         
                <span class="input-group-addon">新增评论</span>      
                <textarea class="form-control" id="{{$field.Id}}" name="{{$field.Name}}" value="{{$field.Flash}}" rows="5" placeholder="内容" required></textarea> 
                {{if $field.Error}} 
                <span class="help-inline">{{$field.Error}}</span> 
                {{end}}   
                <span class="input-group-addon">
                  <button type="submit" class="btn btn-primary" id="button_Form_Submit">提交</button> 
                </span>      
              </div> 
              {{end}}       
            </form>  
          </div>  
        </div>  
      </div>  
    </div> 
  </div> 
</div>
{{template "footer.html" .}}