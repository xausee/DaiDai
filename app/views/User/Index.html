{{set . "title" "我的主页"}}
{{template "header.html" .}}
{{template "navigate_bar.html" .}}

<div class="container">
  <div class="row">
  	<div class="col-xs-1"></div>
  	<div class="col-xs-2">
  	  <div class="panel panel-success" style="height:300px">  
        <div class="panel-heading"><h3 class="panel-title text-center">基本信息</h3></div>      
        <div class="panel-body">           
          <img src="/public/img/cow.jpg" alt="140x140" class="img-thumbnail"> 
          </br></br> 
          <div class="text-center text-success"><p>手指在燃烧</p></div>  
          </br></br>         
          <a href="{{url "User.Watch" .authorNickName}}">关注 
            <span class="badge">{{.fansCount}}</span>
          </a> 
          <a href="{{url "User.AddWatch" .authorNickName}}">关注TA</a>   
          <a href="{{url "User.Fans" .authorNickName}}">粉丝 
            <span class="badge">{{.wathCount}}</span>
          </a>            
          <a href="{{url "User.OriginalArticleList" .authorNickName}}">收藏 
            <span class="badge">{{.wathCount}}</span>
          </a>
          <a href="{{url "User.OriginalArticleList" .authorNickName}}">原创 
            <span class="badge">{{.articleCount}}</span>
          </a>                
        </div>                        
      </div> 
      <div class="panel panel-success" style="height:300px"> 
        <div class="panel-heading"><h3 class="panel-title text-center">最新留言</h3></div>       
        <div class="panel-body"> 
          <sub>{{.lastMessage.Content}}</sub>                    
          <div class="modal-footer"> 
            <p class="text-center">
              <a href="{{url "User.Message" .authorNickName}}">更多留言<span class="badge">{{.messageCount}}</span></a>
            </p>    
          </div>        
        </div>                        
      </div> 
    </div> 

  	<div class="col-xs-8">
  	  <div class="panel panel-success" style="height:620px">
        <div class="panel-heading"><h3 class="panel-title">我的文章</h3></div>
        <div class="panel-body"> 
          <div class="text-right">  
            {{if .isAuthor}}
            <a href="{{url "User.AddArticle"}}">
              <span class="glyphicon glyphicon-plus-sign"></span> 写作
            </a>  
            {{end}} 
          </div>      
          {{$isAuthor := .isAuthor}}
          {{range .allArticles}}
          <div class="row">           
            <div class="col-xs-7"><a href="{{url "User.ShowArticle" .AuthorNickName .Id}}">{{.Title}}</a></div>
            <div class="col-xs-5 text-right">
              <span class="badge text-right">{{.CreateTime}}</span> 
              {{if $isAuthor}}                        
              <a id="edit" href="{{url "User.EditArticle" .Id}}">
                <span class="glyphicon glyphicon-edit"></span> 编辑
              </a>
              <a id="delete" href="{{url "User.DeleteArticle" .Id}}">
                <span class="glyphicon glyphicon-remove-sign"></span> 删除
              </a>             
              {{end}} 
            </div>
          </div>
          {{end}}

          <div class="text-center">                  
            <ul class="pagination pagination-centered">
              <li value="-1" id="previous" onclick="updateEssayList(this.value)"><a>上一页</a></li>
              {{range .pageSlice}}
                <li value={{.}} id=page_{{.}} onclick="updateEssayList(this.value)"><a>{{.}}</a></li>
              {{end}}              
              <li value="-2" id="next" onclick="updateEssayList(this.value)"><a>下一页</a></li>
            </ul>
          </div>      
        </div>                       
       </div>  
    </div>
  </div>  
</div>

{{template "footer.html" .}}